<!-- TODO fix bug where JS doesnt always work 
fix bootstrap styles
-->


<div class="container-fluid">
  <div class="row-fluid pt-2">
<script>
  $('[data-toggle="popover"]').popover();
</script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/js/bootstrap.min.js"></script>
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/css/bootstrap.min.css">

<!--
<style>
.col_popup{
  display: none;
}
.wish_popup{
  display: none;
}
</style>
-->

<% if flash.empty? %>
  <% if !@is_self %>
    <p>User: <%= @target_email %>
    </p>
  <% end %>
  <p>
  <h3>Collection<% if !@is_self %> that I need<% end %></h3>
  <table class=" table table-striped" data-sort-name="name" data-sort-order="desc">
    <thead>
      <tr>
        <th data-field="name" data-sortable="true">Card Name</th>
        <th data-field="set" data-sortable="true">Set Name</th>
        <th data-field="value" data-sortable="true">Card Value</th>
      </tr>
    </thead>

    <tbody>
      <% @collection_card_owned.each do |card| %>
        <tr>
          <td>
          <a href = "" data-toggle="popover" data-html = "true" data-trigger = "hover" data-content = "<img src = <%= card.card.image_url %>>"><%= card.card.name %></a>
          <!--
          <div class = 'col_card_name' id = <%= card.id %>><%= card.card.name %>  </div>
          <div class = 'col_popup' id = <%= card.id %>> <%= image_tag card.card.image_url %> </div>
          -->
          </td>

          <td><%= card.card.card_set.name %></td>
          <td><%= card.value %></td>
        </tr>
      <% end %>
    </tbody>
  </table>
  </p>
  <p>
  <h3>Wishlist<% if !@is_self %> that I have<% end %></h3>
  <table class=" table table-striped" data-sort-name="name" data-sort-order="desc">
    <thead>
      <tr>
        <th data-field="name" data-sortable="true">Card Name</th>
        <th data-field="set" data-sortable="true">Set Name</th>
        <th data-field="value" data-sortable="true">Card Value</th>
      </tr>
    </thead>

    <tbody>
      <% @collection_card_needed.each do |card| %>
        <tr>
          <td>
            <a href = "" data-toggle="popover" data-html = "true" data-trigger = "hover" data-content = "<img src = <%= card.card.image_url %>>"><%= card.card.name %></a>
            <!--
            <div class = 'col_card_name' id = <%= card.id %>><%= card.card.name %>  </div>
            <div class = 'col_popup' id = <%= card.id %>> <%= image_tag card.card.image_url %> </div>
            -->
          </td>
          <td><%= card.card.card_set.name %></td>
          <td><%= card.value %></td>
        </tr>
      <% end %>
    </tbody>
  </table>
  </p>
<% end %>


</div>
</div>